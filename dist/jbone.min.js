/*!
 * jBone v0.0.12 - 2013-11-16 - Library for DOM manipulation
 *
 * https://github.com/kupriyanenko/jbone
 *
 * Copyright 2013 Alexey Kupriyanenko
 * Released under the MIT license.
 */

!function(a,b){"function"==typeof define&&define.amd?define(b):a.jBone=a.$=b()}(this,function(){var a=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,b=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,c=function(a,b){return this instanceof c?d.call(this,a,b):new c(a,b)},d=function(a,b){var d;if("function"==typeof a)a();else{if(a instanceof c)return a;Array.isArray(a)?d=a.map(function(a){return e(a,b)}):a&&(d=e(a,b))}return d instanceof c?d:d?(d=Array.isArray(d)?d:[d],c.merge(this,d),b instanceof Object&&!c.isElement(b)&&this.attr(b),this):this},e=function(d,e){var f,g;if("string"==typeof d&&(f=a.exec(d)))return document.createElement(f[1]);if("string"==typeof d&&(f=b.exec(d))&&f[1])return g=document.createElement("div"),g.innerHTML=d,[].slice.call(g.childNodes);if("string"==typeof d){if(c.isElement(e))return c(e).find(d);try{return[].slice.call(document.querySelectorAll(d))}catch(h){return[]}}return d};return c.setId=function(a){var b=a.jid||void 0;a===window?b="window":a.jid||(b=++c._cache.jid,a.jid=b),c._cache.events[b]||(c._cache.events[b]={})},c.getData=function(a){a=a instanceof c?a[0]:a;var b=a===window?"window":a.jid;return{jid:b,events:c._cache.events[b]}},c.isElement=function(a){return a instanceof c||a instanceof HTMLElement||"string"==typeof a},c.merge=function(a,b){var c=b.length,d=a.length,e=0;if("number"==typeof c)for(;c>e;)a[d++]=b[e],e++;else for(;void 0!==b[e];)a[d++]=b[e++];return a.length=d,a},c.contains=function(a,b){var c,d;return c=function(a,b){return a===b?d=a:(a.parentNode&&c(a.parentNode,b),void 0)},a.forEach(function(a){c(b.parentNode,a)}),d},c._cache={events:{},jid:0},c.fn=c.prototype=[],c.Event=function(a){var b,c;return b=a.split(".").splice(1).join("."),c=a.split(".")[0],a=document.createEvent("Event"),a.initEvent(c,!0,!0),a.namespace=b,a.isDefaultPrevented=function(){return a.defaultPrevented},a},c.fn.on=function(a){var b,d,e,f,g,h,i;return 2===arguments.length?b=arguments[1]:(d=arguments[1],b=arguments[2]),this.forEach(function(j){c.setId(j),g=c.getData(j).events,a.split(" ").forEach(function(a){i=a.split(".")[0],e=a.split(".").splice(1).join("."),g[i]=g[i]?g[i]:[],f=function(a){a.namespace&&a.namespace!==e||(d?~c(j).find(d).indexOf(a.target)?b.call(a.target,a):(h=c.contains(c(j).find(d),a.target))&&b.call(a.target,a):b.call(j,a))},g[i].push({namespace:e,fn:f,originfn:b}),j.addEventListener&&j.addEventListener(i,f,!1)})}),this},c.fn.one=function(){var a,b,d=arguments[0];return 2===arguments.length?a=arguments[1]:(b=arguments[1],a=arguments[2]),this.forEach(function(e){d.split(" ").forEach(function(d){var f=function(b){a.call(e,b),c(e).off(d,f)};2===arguments.length?c(e).on(d,f):c(e).on(d,b,f)})}),this},c.fn.trigger=function(a){var b=[];return a?(b="string"==typeof a?a.split(" ").map(function(a){return $.Event(a)}):[a],this.forEach(function(a){b.forEach(function(b){b.type&&a.dispatchEvent&&a.dispatchEvent(b)})}),this):this},c.fn.off=function(a,b){var d,e,f,g,h=function(a){return b&&a.originfn===b?a.fn:b?void 0:a.fn};return this.forEach(function(b){d=c.getData(b).events,d&&a.split(" ").forEach(function(a){g=a.split(".")[0],f=a.split(".").splice(1).join("."),d[g]?d[g].forEach(function(a){e=h(a),f?a.namespace===f&&b.removeEventListener(g,e):f||b.removeEventListener(g,e)}):f&&Object.keys(d).forEach(function(a){d[a].forEach(function(c){e=h(c),c.namespace===f&&b.removeEventListener(a,e)})})})}),this},c.fn.find=function(a){var b=[];return this.forEach(function(c){[].forEach.call(c.querySelectorAll(a),function(a){b.push(a)})}),c(b)},c.fn.get=function(a){return this[a]},c.fn.eq=function(a){return c(this[a])},c.fn.parent=function(){var a=[];return this.forEach(function(b){~a.indexOf(b.parentNode)||a.push(b.parentNode)}),c(a)},c.fn.toArray=function(){return[].slice.call(this)},c.fn.is=function(){var a=arguments;return this.some(function(b){return b.tagName.toLowerCase()===a[0]})},c.fn.has=function(){var a=arguments;return this.some(function(b){return b.querySelectorAll(a[0]).length})},c.fn.attr=function(){var a=arguments;return"string"==typeof a[0]&&1===a.length?this[0].getAttribute(a[0]):("string"==typeof a[0]&&a.length>1?this.forEach(function(b){b.setAttribute(a[0],a[1])}):a[0]instanceof Object&&this.forEach(function(b){Object.keys(a[0]).forEach(function(c){b.setAttribute(c,a[0][c])})}),this)},c.fn.val=function(a){return 0===arguments.length?this[0].value:(this.forEach(function(b){b.value=a}),this)},c.fn.css=function(){var a=arguments;return"string"==typeof a[0]&&2===a.length?this.forEach(function(b){b.style[a[0]]=a[1]}):a[0]instanceof Object&&this.forEach(function(b){Object.keys(a[0]).forEach(function(c){b.style[c]=a[0][c]})}),this},c.fn.html=function(){var a,c=arguments[0];return void 0!==c?(this.empty.call(this),c instanceof Object||b.exec(c)?this.append.call(this,c):this.forEach(function(a){a instanceof HTMLElement&&(a.innerHTML=c)}),this):(a=[],this.forEach(function(b){b instanceof HTMLElement&&a.push(b.innerHTML)}),a.length?a.join(""):null)},c.fn.append=function(a){return"string"==typeof a&&(a=c(a)),a instanceof c?this.forEach(function(b,c){a.forEach(function(a){c?b.appendChild(a.cloneNode()):b.appendChild(a)})}):(a instanceof HTMLElement||a instanceof DocumentFragment)&&this.forEach(function(b){b.appendChild(a)}),this},c.fn.appendTo=function(a){return c(a).append(this),this},c.fn.empty=function(){return this.forEach(function(a){for(;a.hasChildNodes();)a.removeChild(a.lastChild)}),this},c.fn.remove=function(){return this.forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)}),this},c.support={},c.extend=function(a){var b;return b=[].splice.call(arguments,1),b.forEach(function(b){for(var c in b)a[c]=b[c]}),a},c.fn.each=function(a){var b,c;for(b=this.length>>>0,c=-1;++c<b;)c in this&&a.call(this,c,this[c]);return this},c.fn.data=function(a,b){if(0===arguments.length)return c.extend({},this[0].dataset,this[0].datajbone);if(b instanceof Object)this.forEach(function(c){c.datajbone=c.datajbone||{},c.datajbone[a]=b});else{if(void 0===b)return this[0].dataset[a]||this[0].datajbone&&this[0].datajbone[a];this.forEach(function(c){c.dataset[a]=b})}return this},c.fn.prop=function(a,b){var c;return 1===arguments.length?(this.some(function(b){return c="checked"===a?b.checked:b.getAttribute(a)}),c):(2===arguments.length&&this.forEach(function(c){c.setAttribute(a,b)}),this)},c.fn.hasClass=function(a){return this.some(function(b){return b.classList.contains(a)})},c.fn.removeClass=function(a){return this.forEach(function(b){b.classList.remove(a)}),this},c.fn.addClass=function(a){return this.forEach(function(b){b.classList.add(a)}),this},c.fn.toggleClass=function(a){return this.forEach(function(b){b.classList.toggle(a)}),this},c.fn.click=function(){return this.trigger("click")},c.fn.height=function(){return this[0].clientHeight},c.fn.removeAttr=function(a){this.forEach(function(b){b.removeAttribute(a)})},c.fn.closest=function(a){var b,d,e;return b=c(a),d=this[0],b.some(function(a){return e=c.contains(c(a),d)}),c(e)},c.fn.children=function(){var a=[];return this.forEach(function(b){b.childNodes&&(a=a.concat([].slice.call(b.childNodes)))}),a},c.fn.not=function(a){var b=[];return b=this.filter(function(b){return b!==a}),c(b)},window.jBone=window.$=c,c});