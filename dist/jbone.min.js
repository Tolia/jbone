/*!
 * jBone v0.0.17 - 2013-11-19 - Library for DOM manipulation
 *
 * https://github.com/kupriyanenko/jbone
 *
 * Copyright 2013 Alexey Kupriyanenko
 * Released under the MIT license.
 */

!function(){function a(a,b){var c,d;this.originalEvent=a,d=function(a,b){this[a]="preventDefault"===a?function(){return this.defaultPrevented=!0,b[a]()}:"function"==typeof b[a]?function(){return b[a]()}:b[a]};for(c in a)d.call(this,c,a);l.extend(this,b)}function b(a){return"none"===i.getComputedStyle(a).display}function c(a,c){var d;return a.forEach(function(a){a.style&&(d=a.style.display,c?("none"===d&&(a.style.display=""),""===a.style.display&&b(a)&&(a.style.display="block")):a.style.display="none")}),a}var d=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,e=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,f=[].slice,g=Object.keys,h=document,i=window,j=function(a){return"string"==typeof a},k=function(a){return a instanceof Object},l=function(a,b){return this instanceof l?m.call(this,a,b):new l(a,b)},m=function(a,b){var c;if("function"==typeof a)a();else{if(a instanceof l)return a;Array.isArray(a)?c=a.map(function(a){return n(a,b)}):a&&(c=n(a,b))}return c instanceof l?c:c?(c=Array.isArray(c)?c:[c],l.merge(this,c),k(b)&&!l.isElement(b)&&this.attr(b),this):this},n=function(a,b){var c,g,i=h.createDocumentFragment();if(j(a)&&(c=d.exec(a)))return h.createElement(c[1]);if(j(a)&&(c=e.exec(a))&&c[1]){for(g=h.createElement("div"),g.innerHTML=a;g.childNodes.length;)i.appendChild(g.firstChild);return f.call(i.childNodes)}if(j(a)){if(l.isElement(b))return l(b).find(a);try{return f.call(h.querySelectorAll(a))}catch(k){return}}return a};l.setId=function(a){var b=a.jid;a===i?b="window":void 0===a.jid&&(a.jid=b=++l._cache.jid),l._cache.events[b]||(l._cache.events[b]={})},l.getData=function(a){a=a instanceof l?a[0]:a;var b=a===i?"window":a.jid;return{jid:b,events:l._cache.events[b]}},l.isElement=function(a){return a instanceof l||a instanceof HTMLElement||j(a)},l._cache={events:{},jid:0},l.fn=l.prototype=[],l.merge=function(a,b){for(var c=b.length,d=a.length,e=0;c>e;)a[d++]=b[e++];return a.length=d,a},l.contains=function(a,b){var c;return a.some(function(a){return a.contains(b)?c=a:void 0}),c},l.extend=function(a){return[].splice.call(arguments,1).forEach(function(b){for(var c in b)a[c]=b[c]}),a},l.Event=function(a,b){var c,d;return a.type&&!b&&(b=a,a=a.type),c=a.split(".").splice(1).join("."),d=a.split(".")[0],a=h.createEvent("Event"),a.initEvent(d,!0,!0),l.extend(a,{namespace:c,isDefaultPrevented:function(){return a.defaultPrevented}},b)},l.fn.on=function(b){var c,d,e,f,g,h,i,j=arguments;return 2===j.length?c=j[1]:(d=j[1],c=j[2]),this.forEach(function(j){l.setId(j),g=l.getData(j).events,b.split(" ").forEach(function(b){h=b.split(".")[0],e=b.split(".").splice(1).join("."),g[h]=g[h]||[],f=function(b){b.namespace&&b.namespace!==e||(i=null,d?(~l(j).find(d).indexOf(b.target)||(i=l.contains(l(j).find(d),b.target)))&&(i=i||b.target,b=new a(b,{currentTarget:i}),c.call(i,b)):c.call(j,b))},g[h].push({namespace:e,fn:f,originfn:c}),j.addEventListener&&j.addEventListener(h,f,!1)})}),this},l.fn.one=function(){var a,b,c=arguments[0],d=arguments;return 2===d.length?a=d[1]:(b=d[1],a=d[2]),this.forEach(function(d){c.split(" ").forEach(function(c){var e=function(b){l(d).off(c,e),a.call(d,b)};b?l(d).on(c,b,e):l(d).on(c,e)})}),this},l.fn.trigger=function(b){var c=[];return b?(j(b)?c=b.split(" ").map(function(a){return l.Event(a)}):(b=b instanceof a?b:$.Event(b),c=[b]),this.forEach(function(a){c.forEach(function(b){b.type&&a.dispatchEvent&&a.dispatchEvent(b)})}),this):this},l.fn.off=function(a,b){var c,d,e,f,h=function(a){return b&&a.originfn===b?a.fn:b?void 0:a.fn};return this.forEach(function(b){c=l.getData(b).events,c&&a.split(" ").forEach(function(a){f=a.split(".")[0],e=a.split(".").splice(1).join("."),c[f]?c[f].forEach(function(a){d=h(a),(!e||e&&a.namespace===e)&&b.removeEventListener(f,d)}):e&&g(c).forEach(function(a){c[a].forEach(function(c){d=h(c),c.namespace.split(".")[0]===e.split(".")[0]&&b.removeEventListener(a,d)})})})}),this},l.fn.find=function(a){var b=[];return this.forEach(function(c){try{[].forEach.call(c.querySelectorAll(a),function(a){b.push(a)})}catch(d){}}),l(b)},l.fn.get=function(a){return this[a]},l.fn.eq=function(a){return l(this[a])},l.fn.parent=function(){var a,b=[];return this.forEach(function(c){!~b.indexOf(a=c.parentElement)&&a&&b.push(a)}),l(b)},l.fn.toArray=function(){return f.call(this)},l.fn.is=function(){var a=arguments;return this.some(function(b){return b.tagName.toLowerCase()===a[0]})},l.fn.has=function(){var a=arguments;return this.some(function(b){return b.querySelectorAll(a[0]).length})},l.fn.attr=function(a,b){var c,d=arguments;return j(a)&&1===d.length?this[0].getAttribute(a):(2===d.length?c=function(c){c.setAttribute(a,b)}:k(a)&&(c=function(b){g(a).forEach(function(c){b.setAttribute(c,a[c])})}),this.forEach(c),this)},l.fn.val=function(a){return 0===arguments.length?this[0].value:(this.forEach(function(b){b.value=a}),this)},l.fn.css=function(a,b){var c,d=arguments;return j(a)&&1===d.length?i.getComputedStyle(this[0])[a]:(2===d.length?c=function(c){c.style[a]=b}:k(a)&&(c=function(b){g(a).forEach(function(c){b.style[c]=a[c]})}),this.forEach(c),this)},l.fn.data=function(a,b){var c,d=arguments,e={},f=function(a,b,c){k(c)?(a.jdata=a.jdata||{},a.jdata[b]=c):a.dataset[b]=c},h=function(a){return"true"===a?!0:"false"===a?!1:a};return 0===d.length?(this[0].jdata&&(e=this[0].jdata),g(this[0].dataset).forEach(function(a){e[a]=h(this[0].dataset[a])},this),e):1===d.length&&j(a)?h(this[0].dataset[a]||this[0].jdata&&this[0].jdata[a]):(1===d.length&&k(a)?c=function(b){g(a).forEach(function(c){f(b,c,a[c])})}:2===d.length&&(c=function(c){f(c,a,b)}),this.forEach(c),this)},l.fn.html=function(a){var b,c=[];return void 0!==a?(this.empty().append(a),this):(b=this[0]||{},b instanceof HTMLElement&&(c=b.innerHTML),c)},l.fn.append=function(a){var b;return j(a)&&e.exec(a)?a=l(a):k(a)||(a=document.createTextNode(a)),a instanceof l?b=function(b,c){a.forEach(function(a){c?b.appendChild(a.cloneNode()):b.appendChild(a)})}:a instanceof Node&&(b=function(b){b.appendChild(a)}),this.forEach(b),this},l.fn.appendTo=function(a){return l(a).append(this),this},l.fn.empty=function(){return this.forEach(function(a){for(;a.hasChildNodes();)a.removeChild(a.lastChild)}),this},l.fn.remove=function(){return this.forEach(function(a){a.jdata={},a.parentNode&&a.parentNode.removeChild(a)}),this},l.fn.each=function(a){for(var b=this.length>>>0,c=-1;++c<b;)c in this&&a.call(this[c],c,this[c]);return this},l.fn.prop=function(a,b){var c;return 1===arguments.length?(this.some(function(b){return c="checked"===a?b.checked:b.getAttribute(a)}),c):(2===arguments.length&&this.forEach(function(c){c.setAttribute(a,b)}),this)},l.fn.hasClass=function(a){return this.some(function(b){return b.classList.contains(a)})},l.fn.removeClass=function(a){return this.forEach(function(b){a.split(" ").forEach(function(a){b.classList.remove(a)})}),this},l.fn.addClass=function(a){return this.forEach(function(b){a.split(" ").forEach(function(a){b.classList.add(a)})}),this},l.fn.toggleClass=function(a){return this.forEach(function(b){b.classList.toggle(a)}),this},l.fn.click=function(){return this.trigger("click")},l.fn.height=function(a){return void 0!==a?(this.forEach(function(b){b.style.height=a}),this):this[0].clientHeight},l.fn.removeAttr=function(a){this.forEach(function(b){b.removeAttribute(a)})},l.fn.closest=function(a){var b,c,d;return b=l(a),c=this[0],b.some(function(a){return d=l.contains(l(a),c)}),l(d)},l.fn.parents=function(a){var b,c,d=[];return a?(b=l(a),b.forEach(function(a){this.forEach(function(b){(c=l.contains(l(a),b))&&9!==c.nodeType&&!~d.indexOf(c)&&d.push(c)})},this)):this.forEach(function(a){for(c=a;(c=c.parentNode)&&9!==c.nodeType;)~d.indexOf(c)||d.push(c)}),l(d)},l.fn.children=function(){var a=[];return this.forEach(function(b){[].forEach.call(b.childNodes,function(b){3!==b.nodeType&&a.push(b)})}),l(a)},l.fn.not=function(a){var b=[];return b=this.filter(function(b){return b!==a}),l(b)},l.fn.focus=function(){return this.trigger("focus")},l.fn.siblings=function(a){var b,c=[];return this.forEach(function(d){(b=d.parentNode)&&[].forEach.call(d.parentNode.childNodes,function(b){void 0===a&&b!==d&&3!==b.nodeType?c.push(b):a===!0&&3!==b.nodeType&&c.push(b)})}),l(c)},l.fn.next=function(){var a,b=[];return this.forEach(function(c){!~b.indexOf(a=c.nextElementSibling)&&a&&b.push(a)}),l(b)},l.fn.prev=function(){var a,b=[];return this.forEach(function(c){!~b.indexOf(a=c.previousElementSibling)&&a&&b.push(a)}),l(b)},l.fn.first=function(){return this.eq(0)},l.fn.last=function(){return this.eq(this.length-1)},l.fn.index=function(a){return a instanceof l&&(a=a[0]),a instanceof HTMLElement?this.indexOf(a):void 0},l.fn.is=function(a){return a=a.split(", "),this.some(function(b){return a.some(function(a){return":visible"===a?b.offsetWidth>0||b.offsetHeight>0:":"===a[0]?null!==b.getAttribute(a.split(":")[1]):"."===a[0]?b.classList.contains(a.split(".")[1]):b.tagName.toLowerCase()===a?!0:void 0})})},l.fn.show=function(){return c(this,!0)},l.fn.hide=function(){return c(this)},l.fn.bind=l.fn.on,l.camelCase=function(a){return a.replace(/-([\da-z])/gi,function(a,b){return b.toUpperCase()})},l.proxy=function(a,b){return a.bind(b)},l.fn.map=function(){return l([].map.apply(this,arguments))},l.fn.scrollTop=function(){return this[0].scrollTop||this[0].scrollY||0},l.fn.text=function(){var a=[];return this.forEach(function(b){a.push(b.textContent)}),a.join("")},l.fn.detach=function(){return this.forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)}),this},l.support={},"function"==typeof define&&define.amd&&define(function(){return l}),"object"==typeof i&&"object"==typeof i.document&&(i.jBone=i.$=l)}();