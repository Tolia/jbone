/*!
 * jBone v0.0.14 - 2013-11-18 - Library for DOM manipulation
 *
 * https://github.com/kupriyanenko/jbone
 *
 * Copyright 2013 Alexey Kupriyanenko
 * Released under the MIT license.
 */

!function(a,b){"function"==typeof define&&define.amd?define(b):a.jBone=a.$=b()}(this,function(){function a(a){return"none"===h.getComputedStyle(a).display}function b(b,c){var d;return b.forEach(function(b){b.style&&(d=b.style.display,c?("none"===d&&(b.style.display=""),""===b.style.display&&a(b)&&(b.style.display="block")):b.style.display="none")}),b}var c=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,d=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,e=[].slice,f=Object.keys,g=document,h=window,i=function(a){return"string"==typeof a},j=function(a){return a instanceof Object},k=function(a,b){return this instanceof k?l.call(this,a,b):new k(a,b)},l=function(a,b){var c;if("function"==typeof a)a();else{if(a instanceof k)return a;Array.isArray(a)?c=a.map(function(a){return m(a,b)}):a&&(c=m(a,b))}return c instanceof k?c:c?(c=Array.isArray(c)?c:[c],k.merge(this,c),j(b)&&!k.isElement(b)&&this.attr(b),this):this},m=function(a,b){var f,h,j=g.createDocumentFragment();if(i(a)&&(f=c.exec(a)))return g.createElement(f[1]);if(i(a)&&(f=d.exec(a))&&f[1]){for(h=g.createElement("div"),h.innerHTML=a;h.childNodes.length;)j.appendChild(h.firstChild);return e.call(j.childNodes)}if(i(a)){if(k.isElement(b))return k(b).find(a);try{return e.call(g.querySelectorAll(a))}catch(l){return}}return a};return k.setId=function(a){var b=a.jid;a===h?b="window":void 0===a.jid&&(a.jid=b=++k._cache.jid),k._cache.events[b]||(k._cache.events[b]={})},k.getData=function(a){a=a instanceof k?a[0]:a;var b=a===h?"window":a.jid;return{jid:b,events:k._cache.events[b]}},k.isElement=function(a){return a instanceof k||a instanceof HTMLElement||i(a)},k._cache={events:{},jid:0},k.fn=k.prototype=[],k.merge=function(a,b){for(var c=b.length,d=a.length,e=0;c>e;)a[d++]=b[e],e++;return a.length=d,a},k.contains=function(a,b){var c;return a.some(function(d){return d.contains(b)?c=a:void 0}),c},k.extend=function(a){return[].splice.call(arguments,1).forEach(function(b){for(var c in b)a[c]=b[c]}),a},k.Event=function(a,b){var c,d;return a.type&&!b&&(b=a,a=a.type),c=a.split(".").splice(1).join("."),d=a.split(".")[0],a=g.createEvent("Event"),a.initEvent(d,!0,!0),k.extend(a,{namespace:c,isDefaultPrevented:function(){return a.defaultPrevented}},b)},k.fn.on=function(a){var b,c,d,e,f,g,h=arguments;return 2===h.length?b=h[1]:(c=h[1],b=h[2]),this.forEach(function(h){k.setId(h),f=k.getData(h).events,a.split(" ").forEach(function(a){g=a.split(".")[0],d=a.split(".").splice(1).join("."),f[g]=f[g]||[],e=function(a){a.namespace&&a.namespace!==d||(c?(~k(h).find(c).indexOf(a.target)||k.contains(k(h).find(c),a.target))&&b.call(a.target,a):b.call(h,a))},f[g].push({namespace:d,fn:e,originfn:b}),h.addEventListener&&h.addEventListener(g,e,!1)})}),this},k.fn.one=function(){var a,b,c=arguments[0],d=arguments;return 2===d.length?a=d[1]:(b=d[1],a=d[2]),this.forEach(function(d){c.split(" ").forEach(function(c){var e=function(b){k(d).off(c,e),a.call(d,b)};b?k(d).on(c,b,e):k(d).on(c,e)})}),this},k.fn.trigger=function(a){var b=[];return a?(i(a)?b=a.split(" ").map(function(a){return k.Event(a)}):(a=a instanceof Event?a:$.Event(a),b=[a]),this.forEach(function(a){b.forEach(function(b){b.type&&a.dispatchEvent&&a.dispatchEvent(b)})}),this):this},k.fn.off=function(a,b){var c,d,e,g,h=function(a){return b&&a.originfn===b?a.fn:b?void 0:a.fn};return this.forEach(function(b){c=k.getData(b).events,c&&a.split(" ").forEach(function(a){g=a.split(".")[0],e=a.split(".").splice(1).join("."),c[g]?c[g].forEach(function(a){d=h(a),(!e||e&&a.namespace===e)&&b.removeEventListener(g,d)}):e&&f(c).forEach(function(a){c[a].forEach(function(c){d=h(c),c.namespace.split(".")[0]===e.split(".")[0]&&b.removeEventListener(a,d)})})})}),this},k.fn.find=function(a){var b=[];return this.forEach(function(c){try{[].forEach.call(c.querySelectorAll(a),function(a){b.push(a)})}catch(d){}}),k(b)},k.fn.get=function(a){return this[a]},k.fn.eq=function(a){return k(this[a])},k.fn.parent=function(){var a,b=[];return this.forEach(function(c){!~b.indexOf(a=c.parentElement)&&a&&b.push(a)}),k(b)},k.fn.toArray=function(){return e.call(this)},k.fn.is=function(){var a=arguments;return this.some(function(b){return b.tagName.toLowerCase()===a[0]})},k.fn.has=function(){var a=arguments;return this.some(function(b){return b.querySelectorAll(a[0]).length})},k.fn.attr=function(a,b){var c,d=arguments;return i(a)&&1===d.length?this[0].getAttribute(a):(2===d.length?c=function(c){c.setAttribute(a,b)}:j(a)&&(c=function(b){f(a).forEach(function(c){b.setAttribute(c,a[c])})}),this.forEach(c),this)},k.fn.val=function(a){return 0===arguments.length?this[0].value:(this.forEach(function(b){b.value=a}),this)},k.fn.css=function(a,b){var c,d=arguments;return i(a)&&1===d.length?h.getComputedStyle(this[0])[a]:(2===d.length?c=function(c){c.style[a]=b}:j(a)&&(c=function(b){f(a).forEach(function(c){b.style[c]=a[c]})}),this.forEach(c),this)},k.fn.data=function(a,b){var c,d=arguments,e={},g=function(a,b,c){j(c)?(a.jdata=a.jdata||{},a.jdata[b]=c):a.dataset[b]=c},h=function(a){return"true"===a?!0:"false"===a?!1:a};return 0===d.length?(this[0].jdata&&(e=this[0].jdata),f(this[0].dataset).forEach(function(a){e[a]=h(this[0].dataset[a])},this),e):1===d.length&&i(a)?h(this[0].dataset[a]||this[0].jdata&&this[0].jdata[a]):(1===d.length&&j(a)?c=function(b){f(a).forEach(function(c){g(b,c,a[c])})}:2===d.length&&(c=function(c){g(c,a,b)}),this.forEach(c),this)},k.fn.html=function(a){var b=[];return void 0!==a?(this.empty().append(a),this):(this.forEach(function(a){a instanceof HTMLElement&&b.push(a.innerHTML)}),b.length?b.join(""):null)},k.fn.append=function(a){var b;return i(a)&&d.exec(a)?a=k(a):j(a)||(a=document.createTextNode(a)),a instanceof k?b=function(b,c){a.forEach(function(a){c?b.appendChild(a.cloneNode()):b.appendChild(a)})}:a instanceof Node&&(b=function(b){b.appendChild(a)}),this.forEach(b),this},k.fn.appendTo=function(a){return k(a).append(this),this},k.fn.empty=function(){return this.forEach(function(a){for(;a.hasChildNodes();)a.removeChild(a.lastChild)}),this},k.fn.remove=function(){return this.forEach(function(a){a.jdata={},a.parentNode&&a.parentNode.removeChild(a)}),this},k.fn.each=function(a){for(var b=this.length>>>0,c=-1;++c<b;)c in this&&a.call(this[c],c,this[c]);return this},k.fn.prop=function(a,b){var c;return 1===arguments.length?(this.some(function(b){return c="checked"===a?b.checked:b.getAttribute(a)}),c):(2===arguments.length&&this.forEach(function(c){c.setAttribute(a,b)}),this)},k.fn.hasClass=function(a){return this.some(function(b){return b.classList.contains(a)})},k.fn.removeClass=function(a){return this.forEach(function(b){a.split(" ").forEach(function(a){b.classList.remove(a)})}),this},k.fn.addClass=function(a){return this.forEach(function(b){a.split(" ").forEach(function(a){b.classList.add(a)})}),this},k.fn.toggleClass=function(a){return this.forEach(function(b){b.classList.toggle(a)}),this},k.fn.click=function(){return this.trigger("click")},k.fn.height=function(a){return void 0!==a?(this.forEach(function(b){b.style.height=a}),this):this[0].clientHeight},k.fn.removeAttr=function(a){this.forEach(function(b){b.removeAttribute(a)})},k.fn.closest=function(a){var b,c,d;return b=k(a),c=this[0],b.some(function(a){return d=k.contains(k(a),c)}),k(d)},k.fn.parents=function(a){var b,c,d=[];return a?(b=k(a),b.forEach(function(a){this.forEach(function(b){(c=k.contains(k(a),b))&&9!==c.nodeType&&!~d.indexOf(c)&&d.push(c)})},this)):this.forEach(function(a){for(c=a;(c=c.parentNode)&&9!==c.nodeType;)~d.indexOf(c)||d.push(c)}),k(d)},k.fn.children=function(){var a=[];return this.forEach(function(b){[].forEach.call(b.childNodes,function(b){3!==b.nodeType&&a.push(b)})}),k(a)},k.fn.not=function(a){var b=[];return b=this.filter(function(b){return b!==a}),k(b)},k.fn.focus=function(){return this.trigger("focus")},k.fn.siblings=function(a){var b,c=[];return this.forEach(function(d){(b=d.parentNode)&&[].forEach.call(d.parentNode.childNodes,function(b){void 0===a&&b!==d&&3!==b.nodeType?c.push(b):a===!0&&3!==b.nodeType&&c.push(b)})}),k(c)},k.fn.next=function(){var a,b=[];return this.forEach(function(c){!~b.indexOf(a=c.nextElementSibling)&&a&&b.push(a)}),k(b)},k.fn.prev=function(){var a,b=[];return this.forEach(function(c){!~b.indexOf(a=c.previousElementSibling)&&a&&b.push(a)}),k(b)},k.fn.first=function(){return this.eq(0)},k.fn.last=function(){return this.eq(this.length-1)},k.fn.index=function(a){return a instanceof k&&(a=a[0]),a instanceof HTMLElement?this.indexOf(a):void 0},k.fn.is=function(a){return a=a.split(", "),this.some(function(b){return a.some(function(a){return":visible"===a?b.offsetWidth>0||b.offsetHeight>0:":"===a[0]?null!==b.getAttribute(a.split(":")[1]):"."===a[0]?b.classList.contains(a.split(".")[1]):b.tagName.toLowerCase()===a?!0:void 0})})},k.fn.show=function(){return b(this,!0)},k.fn.hide=function(){return b(this)},k.fn.bind=k.fn.on,k.camelCase=function(a){return a.replace(/-([\da-z])/gi,function(a,b){return b.toUpperCase()})},k.proxy=function(a,b){return a.bind(b)},k.fn.map=function(){return k([].map.apply(this,arguments))},k.fn.scrollTop=function(){return this[0].scrollTop||this[0].scrollY||0},k.fn.text=function(){var a=[];return this.forEach(function(b){a.push(b.textContent)}),a.join("")},k.fn.detach=function(){return this.forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)}),this},k.support={},h.jBone=h.$=k,k});